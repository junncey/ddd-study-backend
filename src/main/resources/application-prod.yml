# 生产环境配置
# 使用方式: java -jar app.jar --spring.profiles.active=prod
# 或设置环境变量: SPRING_PROFILES_ACTIVE=prod

server:
  port: ${SERVER_PORT:8080}

spring:
  # 数据源配置（生产环境必须通过环境变量配置）
  datasource:
    url: jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=Asia/Shanghai
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    druid:
      # 生产环境禁用Druid监控
      stat-view-servlet:
        enabled: false
      web-stat-filter:
        enabled: false

  # Redis配置（生产环境建议设置密码）
  data:
    redis:
      host: ${REDIS_HOST}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      database: ${REDIS_DATABASE:0}

# JWT配置（生产环境必须通过环境变量配置密钥）
jwt:
  secret: ${JWT_SECRET}  # 必须配置，无默认值
  expiration: ${JWT_EXPIRATION:604800000}
  refresh-expiration: ${JWT_REFRESH_EXPIRATION:2592000000}

# 生产环境禁用Swagger
springdoc:
  enable: false

# 日志配置（生产环境使用INFO级别）
logging:
  level:
    root: INFO
    com.example.ddd: INFO
    com.baomidou.mybatisplus: WARN
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n"
  file:
    name: ${LOG_PATH:/var/log/ddd-demo}/application.log
